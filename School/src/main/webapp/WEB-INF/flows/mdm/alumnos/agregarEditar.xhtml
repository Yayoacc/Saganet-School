<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>School - Agregar Alumno</title>
</h:head>

<h:body>
	<h:form>
		<p:growl>
			<p:autoUpdate />
		</p:growl>
		<p:focus />
		<p:panel header="Agregar Alumno">
			<p:panel header="Datos Generales">
				<p:panelGrid columns="2">
					<p:outputLabel value="Nombre" />
					<p:inputText value="${alumno.nombre}" />
					<p:outputLabel value="Primer Apellido" />
					<p:inputText value="${alumno.primerApellido}" />
					<p:outputLabel value="Segundo Apellido" />
					<p:inputText value="${alumno.segundoApellido}" />
					<p:outputLabel value="Género" />
					<p:selectOneMenu value="${alumno.genero}">
						<f:selectItems value="${modeloGeneros.listado}" var="item"
							itemLabel="${item.nombre}" itemValue="${item}" />
					</p:selectOneMenu>
					<p:outputLabel value="Fecha de Nacimiento" />
					<p:calendar value="${alumno.fechaNacimiento}"
						converter="CalendarConverter" pattern="dd/MM/yyyy"
						navigator="true" />
				</p:panelGrid>
			</p:panel>
			<p:separator />
			<p:panel header="Dirección">
				<p:panelGrid columns="2">
					<p:outputLabel value="Calle" />
					<p:inputText value="${alumno.direccion.calle}" />
					<p:outputLabel value="Número Exterior" />
					<p:inputText value="${alumno.direccion.numeroExterior}" />
					<p:outputLabel value="Número Interior" />
					<p:inputText value="${alumno.direccion.numeroInterior}" />
					<p:outputLabel value="Colonia" />
					<p:inputText value="${alumno.direccion.colonia}" />
					<p:outputLabel value="Código Postal" />
					<p:inputText value="${alumno.direccion.codigoPostal}" />
				</p:panelGrid>
			</p:panel>
			<p:separator />
			<p:panel header="Padre">
				<p:panelGrid columns="2">
					<p:outputLabel id="labelPadreNombre" value="${alumno.padre.id == null ? 'No especificado' : alumno.padre.nombreCompleto}" />
				</p:panelGrid>
				<f:facet name="footer">
					<p:commandButton value="Seleccionar" onclick="PF('dialogoSeleccionarPadreWV').show()" icon="ui-icon-person" />
				</f:facet>
			</p:panel>

			<f:facet name="footer">
				<p:commandButton id="botonGuardar" value="Guardar" action="guardar" disabled="${alumno.padre.id == null}" icon="ui-icon-disk" />
				<p:commandButton value="Cancelar" action="cancelar" immediate="true" icon="ui-icon-close"/>
			</f:facet>
		</p:panel>
	</h:form>
	
<!-- 	ESTE ES EL FORM DEL DIALOGO -->
	
	<h:form>
		<p:dialog widgetVar="dialogoSeleccionarPadreWV" header="Seleccionar Padre" modal="true" closable="true" closeOnEscape="true" visible="false">

<!-- 			<p:panelGrid columns="2"> -->
<!-- 				<p:outputLabel value="Padre" /> -->
<!-- 				<p:selectOneMenu value="${alumno.padre}" converter="ObjectConverter" filter="true"> -->
<!-- 					<f:selectItems value="${modeloPadre.listado}" var="padre" itemLabel="${padre.nombreCompleto}" itemValue="${padre}" />  -->
<!-- 				</p:selectOneMenu> -->
<!-- 			</p:panelGrid> -->

			<p:dataTable value="${modeloPadre.listado}" var="fila" rowKey="${fila.id}"
				selection="${alumno.padre}" selectionMode="single"
				paginator="true" rows="5" paginatorAlwaysVisible="false" paginatorPosition="bottom" >
				<p:column headerText="Id" width="50">
					<p:outputLabel value="${fila.id}" />
				</p:column>
				
				<p:column headerText="Primer Apellido" width="200">
					<p:outputLabel value="${fila.primerApellido}" />
				</p:column>
				<p:column headerText="Segundo Apellido" width="200">
					<p:outputLabel value="${fila.segundoApellido}" />
				</p:column>
				
				<p:column headerText="Nombre" width="200">
					<p:outputLabel value="${fila.nombre}" />
				</p:column>
			</p:dataTable>

			
			<f:facet name="footer">
				<p:commandButton value="Seleccionar" onclick="PF('dialogoSeleccionarPadreWV').hide()" update="${p:component('botonGuardar')} ${p:component('labelPadreNombre')}" />
			</f:facet>
		</p:dialog>
	</h:form>
</h:body>

</html>
