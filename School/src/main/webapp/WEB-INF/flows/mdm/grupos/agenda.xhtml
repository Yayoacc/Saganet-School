<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title></title>
</h:head>

<h:body>
	<ui:composition template="/WEB-INF/layouts/template.xhtml">
		<ui:define name="title">School - ${grupo.nombre} / Agenda</ui:define>
		<ui:define name="content">
			<h:form>
				<p:growl id="messages" showDetail="true" />
				<p:panel header="${grupo.nombre} / Agenda">
					<p:schedule id="schedule" locale="es"
						value="${modeloCalendario.modelo}" widgetVar="myschedule"
						timeZone="GMT+2">
						<p:ajax event="dateSelect"
							listener="${modeloCalendario.onDateSelect}" update="eventDetails"
							oncomplete="PF('eventDialog').show();" />
						<p:ajax event="eventSelect"
							listener="${modeloCalendario.onEventSelect}"
							update="eventDetails" oncomplete="PF('eventDialog').show();" />
						<p:ajax event="eventMove" 
							listener="${modeloCalendario.onEventMove}" update="messages" oncomplete="PF('confirmDialog').show();">
							
						</p:ajax>
						<p:ajax event="eventResize"
							listener="${modeloCalendario.onEventResize}" update="messages" />

					</p:schedule>

				</p:panel>
				<p:dialog widgetVar="eventDialog" header="Detalles del evento"
					showEffect="clip" hideEffect="clip" closeOnEscape="true">
					<h:panelGrid id="eventDetails" columns="2">
						<p:outputLabel for="title" value="Nombre:" />
						<p:inputText id="title" value="${modeloCalendario.event.title}"
							required="true"/>

						<p:outputLabel for="from" value="Desde:" />
						<p:calendar id="from" value="${modeloCalendario.event.startDate}"
							timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm" />

						<p:outputLabel for="to" value="Hasta:" />
						<p:calendar id="to" value="${modeloCalendario.event.endDate}"
							timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm" />

						<p:outputLabel for="allDay" value="Todo el día:" />
						
						<h:selectBooleanCheckbox id="allDay"
							value="${modeloCalendario.event.allDay}" />
						<center>
							<p:commandButton id="addButton" value="Save"
							action="agregarEvento"
							oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
						</center>
					</h:panelGrid>
				</p:dialog>
				
				<p:dialog widgetVar="confirmDialog" closeOnEscape="true">
					<center>
					<p:outputLabel value="¿Estas seguro de mover el evento?"/>
					<br/>
					<p:commandButton value="Ok" action="mover" oncomplete="PF('myschedule').update();PF('confirmDialog').hide();"/>
					<p:commandButton value="Cancelar" action="cancelar" oncomplete="PF('myschedule').update();PF('confirmDialog').hide();"/>
					</center>
				</p:dialog>

			</h:form>
			<script type="text/javascript">
				PrimeFaces.locales['es'] = {
					closeText : 'Cerrar',
					prevText : 'Anterior',
					nextText : 'Siguiente',
					monthNames : [ 'Enero', 'Febrero', 'Marzo', 'Abril',
							'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre',
							'Octubre', 'Noviembre', 'Diciembre' ],
					monthNamesShort : [ 'Ene', 'Feb', 'Mar', 'Abr', 'May',
							'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic' ],
					dayNames : [ 'Domingo', 'Lunes', 'Martes', 'Miércoles',
							'Jueves', 'Viernes', 'Sábado' ],
					dayNamesShort : [ 'Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie',
							'Sab' ],
					dayNamesMin : [ 'D', 'L', 'M', 'M', 'J', 'V', 'S' ],
					weekHeader : 'Semana',
					firstDay : 1,
					isRTL : false,
					showMonthAfterYear : false,
					yearSuffix : '',
					timeOnlyTitle : 'Sólo hora',
					timeText : 'Tiempo',
					hourText : 'Hora',
					minuteText : 'Minuto',
					secondText : 'Segundo',
					currentText : 'Fecha actual',
					ampm : false,
					month : 'Mes',
					week : 'Semana',
					day : 'Día',
					allDayText : 'Todo el día'
				};
			</script>
		</ui:define>
	</ui:composition>
</h:body>
</html>